<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Willow</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <meta name="theme-color" content="#212121" />
    <meta name="google" content="notranslate" />
  </head>
  <body style="background-color: #323232;">
    <script src="https://cdn.auth0.com/js/auth0/9.11/auth0.min.js"></script>
    <script>
      function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
      }

      async function load() {
        try {
          const region = getCookie('api');
          if (region == null) {
            throw new Error('No region found');
          }

          const response = await window.fetch('/public/config.json');
          const config = await response.json();

          const auth0Client = new auth0.WebAuth({
            clientID: config[`auth0ClientID-${region}`],
            domain: config[`auth0Domain-${region}`],
            audience: config[`auth0Audience-${region}`],
          });
          auth0Client.crossOriginVerification();
        } catch (err) {
          document.body.innerHTML = `<a href="/" style="color: #fff">An error has occurred</a><div style="color: #fff">${err}</div>`;
        }
      }

      load();
    </script>
  </body>
</html>
